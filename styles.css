/* ===== Base ===== */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

:root{
  --maxw: 760px;
  --pad: clamp(12px, 3vw, 28px);
  --radius: 16px;
  --shadow: 0 10px 28px rgba(0,0,0,.08);

  --bg:#0b0c10;
  --surface:#12141a;
  --surface-2:#171a22;
  --ink:#e9eef2;
  --muted:#a7b1b8;
  --primary:#5dd2ff;
  --primary-ink:#051820;
}

html { -webkit-text-size-adjust: 100%; }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  line-height:1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== Screens ===== */
.screen{
  min-height: 100svh;
  padding: var(--pad);
  display:flex; align-items:center; justify-content:center;
}
.hidden{ display:none !important; }
.screen.show{ display:flex !important; }

.card{
  width:min(100%, var(--maxw));
  background:var(--surface);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:clamp(16px, 3.5vw, 32px);
}

h1,h2,h3{ margin:0 0 .6em 0; line-height:1.2; }
h1{ font-size: clamp(22px, 3.5vw, 34px); }
h2{ font-size: clamp(18px, 3vw, 28px); }
h3{ font-size: clamp(16px, 2.5vw, 22px); }
p{ margin:.5em 0; }
.muted{ color:var(--muted); }

label.label{ display:block; margin-top:.75rem; color:var(--muted); }
input#pid{
  width:260px; max-width:100%;
  padding:.6rem .8rem; border-radius:10px;
  border:1px solid #212633; background:#0e1118; color:var(--ink);
}
input#pid:focus{ border-color:#2c8ab3; }

button{ appearance:none; border:0; border-radius:12px; padding:.85rem 1.1rem; font-weight:600; cursor:pointer; }
button.primary{ background:var(--primary); color:var(--primary-ink); }
button.secondary{ background:var(--surface-2); color:var(--ink); border:1px solid #222838; }
.row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }

/* ===== Task (single column everywhere) ===== */
#screen-task{ align-items: stretch; }
.task-wrap{
  width:min(100%, var(--maxw));
  margin-inline:auto;
  display:flex; flex-direction:column;
  gap: clamp(10px, 2vh, 16px);
}

/* Fixation */
#fixation{
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;  /* more explicit than inset for Chrome */
  display: none;                         /* hidden by default; JS will set flex */
  align-items: center;                   /* cross-browser centering */
  justify-content: center;
  font-size: clamp(28px, 7vw, 62px);
  line-height: 1;
  font-weight: 700;
  color: var(--muted);
  pointer-events: none;
  z-index: 9999;
}
/* Scenario */
.scenario{
  min-height: clamp(240px, 52svh, 460px);
  display:flex; align-items:center; justify-content:center;
  text-align:center; padding:clamp(10px, 2vw, 16px);
}
.scenario .line{
  font-size: clamp(18px, 2.4vw, 24px);
  line-height:1.35; margin:.25rem 0;
}
.scenario .strong{ font-weight:700; }

/* Answers under scenario */
.answers{
  display:flex; flex-direction:column; gap:10px;
  align-items:stretch;
}
.answer-btn{
  width:100%;
  padding:1rem 1.2rem;
  background:var(--surface-2); color:var(--ink);
  border:1px solid #222838; border-radius:14px;
  font-size:clamp(16px, 2.2vw, 18px);
  box-shadow:var(--shadow);
}

/* ===== Confidence modal (centered) ===== */
.confidence{
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  display: none;
  background: rgba(0,0,0,.45);
  z-index: 9998;
}

.confidence.is-open{
  display: flex !important;
  align-items: center;
  justify-content: center;
}
.conf-wrap{
  width: min(92vw, 520px);
  background: var(--surface);
  border: 1px solid #222838;
  border-radius: 18px;
  box-shadow: var(--shadow);
  padding: clamp(16px, 3.5vw, 28px);
}
.conf-title{ text-align:center; font-size:clamp(18px, 2.4vw, 22px); margin-bottom:.75rem; }
.conf-grid{ display:grid; grid-template-columns:repeat(5, 1fr); gap:10px; }
.conf{
  padding:.8rem 0; font-size:clamp(16px, 2.2vw, 18px);
  background:var(--surface-2); color:var(--ink);
  border:1px solid #222838; border-radius:12px;
}
.conf:hover,.conf:focus{ outline:2px solid var(--primary); outline-offset:1px; }

/* ===== Results ===== */
.done-card{ background:var(--surface-2); padding:14px; border-radius:14px; border:1px solid #222838; }
.apa{ background:#0f141b; color:#d9e3ea; padding:12px; border-radius:12px; border:1px solid #1e2433; overflow-x:auto; }

/* Tiny devices */
@media (max-width: 360px){
  .scenario{ min-height: clamp(260px, 58svh, 520px); }
  .scenario .line{ font-size: clamp(16px, 5.2vw, 18px); }
}

/* Desktop tweak */
@media (min-width: 1024px){
  .scenario{ min-height: clamp(320px, 42vh, 520px); }
}
